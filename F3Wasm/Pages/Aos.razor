@page "/aos/{region}"
@using F3Wasm.Models
@using F3Wasm.Data
@using F3Core
@using System.Globalization
@inject HttpClient Http
@using ApexCharts

<PageTitle>F3 @Region.ToUpper() AOs</PageTitle>

@if (allData == null)
{
    <p>Loading...</p>
}
else
{
    <Row>
        <Column>
            <Button Color="currentView == OverallView.AllTime ? Blazorise.Color.Primary : Blazorise.Color.Light" Clicked="@(x => UpdateDisplay(OverallView.AllTime))">All Time</Button>
            @* <Button Color="currentView == OverallView.LastYear ? Blazorise.Color.Primary : Blazorise.Color.Light" Clicked="@(x => UpdateDisplay(OverallView.LastYear))">@DateTime.Now.AddYears(-1).ToString("yyyy", CultureInfo.InvariantCulture)</Button>
            <Button Color="currentView == OverallView.ThisYear ? Blazorise.Color.Primary : Blazorise.Color.Light" Clicked="@(x => UpdateDisplay(OverallView.ThisYear))">@DateTime.Now.ToString("yyyy", CultureInfo.InvariantCulture)</Button> *@
            @* <Button Color="currentView == OverallView.LastMonth ? Blazorise.Color.Primary : Blazorise.Color.Light" Clicked="@(x => UpdateDisplay(OverallView.LastMonth))">@DateTime.Now.AddMonths(-1).ToString("MMM", CultureInfo.InvariantCulture)</Button>
            <Button Color="currentView == OverallView.ThisMonth ? Blazorise.Color.Primary : Blazorise.Color.Light" Clicked="@(x => UpdateDisplay(OverallView.ThisMonth))">@DateTime.Now.ToString("MMM", CultureInfo.InvariantCulture)</Button> *@
        </Column>
    </Row>
    <Row>
        <Column>
            <Button Color="currentSort == SortView.DayOfWeek ? Blazorise.Color.Info : Blazorise.Color.Light" Clicked="@(x => UpdateDisplay(OverallView.UNSET, SortView.DayOfWeek))">Days</Button>
            <Button Color="currentSort == SortView.Count ? Blazorise.Color.Info : Blazorise.Color.Light" Clicked="@(x => UpdateDisplay(OverallView.UNSET, SortView.Count))">Counts</Button>
        </Column>
    </Row>
    <Row>
        <Column>
            <Button Clicked="@(async x => await Render())" Color="Blazorise.Color.Success">Render</Button>
        </Column>
    </Row>

    <ApexChart TItem="AoDisplay" Title="AOs" Options="options" @ref="chart">
        <ApexPointSeries TItem="AoDisplay" Items="aoCounts" Name="Count" XValue="@(e => e.Ao.Name)" YValue="@(e => e.Count)"
            SeriesType="SeriesType.Bar"
            Color="#005ba3" PointColor="e=> e.HexColor" ShowDataLabels />
    </ApexChart>

}
